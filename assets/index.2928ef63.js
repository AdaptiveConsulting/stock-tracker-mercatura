var C=Object.defineProperty,E=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var _=(e,t,s)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,x=(e,t)=>{for(var s in t||(t={}))F.call(t,s)&&_(e,s,t[s]);if($)for(var s of $(t))O.call(t,s)&&_(e,s,t[s]);return e},b=(e,t)=>E(e,T(t));import{j as i,a as n,r as f,F as j,R as I,b as U,L as q,c as D,C as K,X as W,Y,T as v,d as B,e as H}from"./vendor.ae85c455.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}};V();const p=e=>"$"+e,L=e=>{const t=e.toString();if(t.length<=3)return t;const s=["","K","M","B","T"],o=Math.floor(e.toString().length/3),r=Math.floor(e.toString().length%3)===0?o-1:o,c=Math.floor(e)/Math.pow(1e3,r),a=e.toString().length%3==0?o-1:o;return c.toFixed(2)+s[a]};const X=({stats:{open:e,high:t,low:s,previousClose:o,week52High:r,week52Low:c,marketCap:a,peRatio:l,dividendYield:d,incomeNetPerWabsoSplitAdjusted:g,isUsMarketOpen:h,volume:k,avgTotalVolume:m}})=>i("div",{className:"stats",children:[n("h2",{className:"stats__title",children:"Key Statistics"}),i("div",{className:"stats-container",children:[i("ul",{className:"stats__list",children:[i("li",{children:["Open ",n("span",{children:e?p(e):"-"})]}),i("li",{children:["High ",n("span",{children:t?p(t):"-"})]}),i("li",{children:["Low ",n("span",{children:s?p(s):"-"})]}),i("li",{children:["Previous Close ",n("span",{children:p(o)})]})]}),i("ul",{className:"stats__list middle-section",children:[i("li",{children:["Day Range"," ",n("span",{children:t?p(`${t} - ${s}`):"-"})]}),i("li",{children:["52 Week Range"," ",n("span",{children:p(`${r} - ${c}`)})]}),i("li",{children:["Market Cap ",n("span",{children:L(a)})]}),i("li",{children:["P/E Ratio ",n("span",{children:l})]})]}),i("ul",{className:"stats__list",children:[i("li",{children:["Dividend Yield ",n("span",{children:d.toFixed(2)+"%"})]}),i("li",{children:["Earnings Per Share"," ",n("span",{children:p(g.toFixed(2))})]}),i("li",{children:["Volume ",n("span",{children:h?k:"-"})]}),i("li",{children:["Total Avg. Volume ",n("span",{children:L(m)})]})]})]})]}),P="https://sandbox.iexapis.com/stable/",z=`${P}stock/AAPL/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,Q=`${P}time-series/FUNDAMENTAL_VALUATIONS/AAPL?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;async function G(){try{const e=await fetch(z),t=await fetch(Q),s=await e.json(),o=await t.json();return x(x({},s),o[0])}catch(e){console.log("Error: ",e)}}const J=G(),Z=()=>{const[e,t]=f.exports.useState({});return f.exports.useEffect(()=>{J.then(s=>t(s)).catch(s=>console.error(s))},[]),n(j,{children:Object.keys(e).length===0?"Loading...":n(X,{stats:e})})},ee="https://sandbox.iexapis.com/stable/",te="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",se=async()=>(await fetch(`${ee}/stock/AAPL/intraday-prices?${te}&chartInterval=10`)).json(),ne=e=>{if(typeof e!="string"||!e.match(/(\d?\d:\d\d){1}/))throw new Error("timeString must be a string in the format m:hh or mm:hh");{const t=Number.parseInt(e.slice(0,-2));if(t===12)return e+" PM";const s=t>12?"PM":"AM",o=e.slice(-2);return`${t%12}:${o} ${s}`}};const u={accentPrimary:"#aaabd1",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",keys:"#7f7f7f"},re=e=>e.filter(t=>t.average),oe=()=>{const[e,t]=f.exports.useState([]);return f.exports.useEffect(()=>{se().then(s=>{const o=re(s);t(o)}).catch(s=>console.error(s))},[]),e.length?n("div",{className:"chart-container",children:n(ae,{data:e,interval:4})}):null},ce=({x:e,y:t,payload:s,style:o,min:r})=>{let c="-";return(s.value-r)%2==0&&(c=Number.parseFloat(s.value).toFixed(0)),n(v,{x:e,y:t,fill:u.keys,style:o,textAnchor:"end",verticalAnchor:"middle",children:c})},ie=({x:e,y:t,payload:s,style:o,index:r})=>{const c=ne(s.value);let a=r===0?"start":"middle";return n(v,{x:e,y:t+10,textAnchor:a,fill:u.keys,style:o,children:c})},ae=({data:e,interval:t})=>{const s=n(D,{type:"linear",dataKey:"average",dot:!1,stroke:u.accentPrimary,strokeWidth:2}),o=n(K,{stroke:u.coreSecondary3,vertical:!1,strokeWidth:1}),r={fontFamily:"Roboto"},c=n(W,{type:"category",dataKey:"minute",interval:t-1,axisLine:!1,tickMargin:10,tick:n(ie,{}),tickSize:12,tickLine:{stroke:u.coreSecondary3},stroke:u.coreSecondary3,strokeWidth:.5,style:r}),a=e.map(y=>y.average),l=Math.floor(Math.min(...a)),d=Math.max(...a)+1,g=Math.ceil(d-l);let h=[];for(let y=0;y<g;y+=1)h.push(l+y);const k=n(Y,{type:"number",dataKey:"average",stroke:u.coreSecondary3,style:r,ticks:h,tickMargin:10,tick:n(ce,{min:l}),tickSize:12,tickLine:{stroke:u.coreSecondary3},domain:[l,d]}),m=new Array(Math.ceil(e.length/t)).fill(""),w=m.map((y,S)=>{const A=S*t,M=e[A].minute,R=S===m.length-1?e[e.length-1]:e[A+t].minute;return n(I,{x1:M,x2:R,y1:l,y2:d,fill:S%2!=0?u.coreSecondary2:"rgba(0, 0, 0, 0)"},S)});return n(U,{width:"100%",height:"100%",children:i(q,{data:e,children:[w,o,s,c,k]})})};const le="https://sandbox.iexapis.com/stable/",de="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",ue=async e=>{try{return(await fetch(`${le}/stock/${e}/news/last/3?${de}`)).json()}catch(t){console.error(t)}},N=(e,t)=>{const s=Math.floor(e/t),o=e%t;return console.log(s),[s,o]},he=e=>{console.log(e);const t=e-Date.now();console.log(t);const[s,o]=N(t,3154e7);if(s>0)return"Over a year";const[r,c]=N(o,2628e6);if(r>0)return r>1?"1 month":`${r} months`;const[a,l]=N(c,864e5);if(a>0)return a>1?"1 day":`${a} days`;const[d,g]=N(l,36e5);if(d>0)return d>1?"1 hour":`${d} hours`;const[h,k]=N(g,6e4);if(h>0)return h>1?"1 minute":`${h} minutes`;const m=k/1e3;return m>0?m>1?"1 second":`${m} seconds`:"Error"};function me(){const[e,t]=f.exports.useState(null);return f.exports.useEffect(()=>{ue("AAPL").then(s=>{console.log(s),t(s)})},[]),e?i("div",{className:"newsfeed__background",children:[n("h2",{className:"latest-news-text",children:"Latest News"}),e.map(s=>n(fe,{link:s.url,content:s.headline,timeSincePublication:s.datetime,source:s.source},s.headline))]}):null}function fe({link:e,content:t,timeSincePublication:s,source:o}){const r=he(s);return i("div",{className:"article",children:[n("a",{href:e,children:n("h3",{className:"article__content",children:t})}),n("p",{className:"article__time-source",children:`${r} ago - ${o}`})]})}const pe="https://sandbox.iexapis.com/stable",ye=async e=>{const t=`${pe}/stock/${e}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return(await fetch(t)).json()};const ge=()=>{const[e,t]=f.exports.useState({});return f.exports.useEffect(()=>{ye("AAPL").then(s=>{const o=s.description.substring(0,500);t(b(x({},s),{description:o}))})},[]),Object.keys(e).length===0?"Loading...":i("div",{className:"company__summary",children:[n("h2",{children:"Company Summary"}),n("div",{className:"company__name",children:`${e.companyName} (${e.symbol})`}),n("div",{className:"company__website",children:e.website}),n("div",{className:"company__description",children:e.description})]})};function ke(){return i("div",{className:"App",children:[n("div",{className:"logo-section"}),i("div",{className:"main-section",children:[n(oe,{}),n(Z,{})]}),i("div",{className:"news-summary-section",children:[n(me,{}),n(ge,{})]})]})}B.render(n(H.StrictMode,{children:n(ke,{})}),document.getElementById("root"));
