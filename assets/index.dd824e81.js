var W=Object.defineProperty,Y=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))G.call(t,s)&&C(e,s,t[s]);if(P)for(var s of P(t))z.call(t,s)&&C(e,s,t[s]);return e},S=(e,t)=>Y(e,B(t));import{j as i,a as o,r as d,F as J,X as I,T as E,R as b,L as _,Y as Q,b as Z,c as ee,d as $,e as M,C as T,f as te,g as se}from"./vendor.f0c33521.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}};ne();const g=e=>"$"+e,R=e=>{const t=e.toString();if(t.length<=3)return t;const s=["","K","M","B","T"],n=Math.floor(e.toString().length/3),r=Math.floor(e.toString().length%3)===0?n-1:n,a=Math.floor(e)/Math.pow(1e3,r),c=e.toString().length%3==0?n-1:n;return a.toFixed(2)+s[c]};const re=({stats:{open:e,high:t,low:s,previousClose:n,week52High:r,week52Low:a,marketCap:c,peRatio:l,dividendYield:u,incomeNetPerWabsoSplitAdjusted:m,volume:f,avgTotalVolume:h}})=>i("div",{className:"stats",children:[o("h2",{className:"stats__title",children:"Key Statistics"}),i("div",{className:"stats-container",children:[i("ul",{className:"stats__list",children:[i("li",{children:["Open ",o("span",{children:e?g(e):"-"})]}),i("li",{children:["High ",o("span",{children:t?g(t):"-"})]}),i("li",{children:["Low ",o("span",{children:s?g(s):"-"})]}),i("li",{children:["Previous Close ",o("span",{children:g(n)})]})]}),i("ul",{className:"stats__list middle-section",children:[i("li",{children:["Day Range"," ",o("span",{children:t?g(`${t} - ${s}`):"-"})]}),i("li",{children:["52 Week Range"," ",o("span",{children:g(`${r} - ${a}`)})]}),i("li",{children:["Market Cap ",o("span",{children:R(c)})]}),i("li",{children:["P/E Ratio ",o("span",{children:l})]})]}),i("ul",{className:"stats__list",children:[i("li",{children:["Dividend Yield ",o("span",{children:(u==null?void 0:u.toFixed(2))+"%"})]}),i("li",{children:["Earnings Per Share"," ",o("span",{children:g(m==null?void 0:m.toFixed(2))})]}),i("li",{children:["Volume ",o("span",{children:f!=null?f:"-"})]}),i("li",{children:["Total Avg. Volume ",o("span",{children:R(h)})]})]})]})]}),F="https://sandbox.iexapis.com/stable/";async function oe(e){const t=`${F}stock/${e}/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,s=`${F}time-series/FUNDAMENTAL_VALUATIONS/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const n=await fetch(t),r=await fetch(s),a=await n.json(),c=await r.json();return p(p({},a),c[0])}catch(n){console.log("Error: ",n)}}const O=d.exports.createContext("AAPL"),v=()=>d.exports.useContext(O),ae=({children:e})=>{const[t,s]=d.exports.useState("AAPL");return o(O.Provider,{value:{symbol:t,setSymbol:s},children:e})},ce=()=>{const[e,t]=d.exports.useState({}),{symbol:s}=v();return d.exports.useEffect(()=>{oe(s).then(n=>t(n)).catch(n=>console.error(n))},[s]),o(J,{children:Object.keys(e).length===0?"Loading...":o(re,{stats:e})})},y={accentPrimary:"#aaabd1",accentBeAware2:"#ffc57f",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",daySeparator:"#7fb3ff",keys:"#7f7f7f"},ie=({x:e,dx:t,y:s,dy:n,style:r,payload:a})=>o(E,{x:e+t,y:s+n,fontSize:16,style:r,children:a.value}),A=({data:e,daySize:t,style:s,isHidden:n})=>{const r=new Set(e.map(c=>c.date)),a=Math.floor(e.length/[...r].length);return o(I,{xAxisId:"top",type:"category",dataKey:"date",tick:o(ie,{}),stroke:y.daySeparator,tickLine:!n,interval:a-1,allowDuplicatedCategory:!0,orientation:"top",style:s,axisLine:!1,dx:t/2-70,dy:-10,margin:{bottom:50}})},le=({data:e,axisProps:t,min:s,max:n})=>o("div",{className:"static-y-axis",children:o(b,{height:"100%",width:61,children:i(_,{data:e,margin:{bottom:40},children:[L({axisProps:t,min:s,max:n}),A({data:e,style:t.style,isHidden:!0})]})})});function L({axisProps:e,min:t,max:s,hide:n}){const{tickSize:r,tickMargin:a,tickLine:c,stroke:l,strokeWidth:u,style:m}=e;return o(Q,{type:"number",dataKey:"average",domain:[t,s],tickSize:r,tickCount:5,tickMargin:a,tickLine:c,stroke:l,strokeWidth:u,style:m,hide:n})}const D="https://sandbox.iexapis.com/stable/",U="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",de=async e=>(await fetch(`${D}/stock/${e}/intraday-prices?${U}&chartInterval=10`)).json(),ue=async e=>(await fetch(`${D}/stock/${e}/chart/5dm?${U}`)).json(),K=e=>e.filter(t=>t.average!==null),me=()=>{const[e,t]=d.exports.useState(null),[s,n]=d.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:r}=v();return d.exports.useEffect(()=>{ue(r).then(a=>{const c=K(a),l=c.map(h=>h.average),u=Math.floor(Math.min(...l)),m=Math.floor(Math.max(...l)+1);n({min:u,max:m}),c.push(S(p({},c[c.length-1]),{minute:"16:00"}));const f=c.map((h,N)=>S(p({},h),{minute:N.toString()+" "+h.minute}));t(f)}).catch(a=>console.error("Error retrieving historical prices: "+a))},[r]),[e,s]},he=()=>{const[e,t]=d.exports.useState(null),[s,n]=d.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:r}=v();return d.exports.useEffect(()=>{de(r).then(a=>{const c=K(a),l=c.map(f=>f.average),u=Math.floor(Math.min(...l)),m=Math.floor(Math.max(...l)+1);n({min:u,max:m}),t(c)}).catch(a=>console.error("Error retrieving intraday prices: "+a))},[r]),[e,s]},fe=()=>{const e=d.exports.useRef(null);let t={left:0,x:0};const s=a=>{t={left:e.current.scrollLeft,x:a.clientX},document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)},n=a=>{const c=a.clientX-t.x;e.current.scrollLeft=t.left-c},r=a=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)};return[e,s]},q=e=>{const t=ye(e);if(typeof t!="string"||!t.match(/(\d?\d:\d\d){1}/))throw new Error("cleanTimeString must be a string in the format m:hh or mm:hh");{const s=Number.parseInt(t.slice(0,-2));if(s===12)return t+" PM";const n=s>12?"PM":"AM",r=t.slice(-2);return`${s%12}:${r} ${n}`}},ye=e=>{if(typeof e=="string"){const t=e.indexOf(" ");return e.slice(t+1)}return e},pe=({x:e,y:t,payload:s,style:n,index:r})=>{let a=q(s.value);a==="4:00 PM"&&(a="");let c=a==="9:30 AM"?"start":"middle";return o(E,{x:e,y:t+10,textAnchor:c,fill:y.keys,style:n,fontSize:12,children:a})};function j({axisProps:e,interval:t}){const{tickSize:s,tickMargin:n,tickLine:r,stroke:a,strokeWidth:c,style:l}=e;return o(I,{type:"category",dataKey:"minute",tick:o(pe,{}),axisLine:!1,interval:t-1,tickSize:s,tickMargin:n,tickLine:r,stroke:a,strokeWidth:c,style:l,allowDuplicatedCategory:!1})}const ge=e=>e.slice(-2),H=e=>{const t=new Array(Math.ceil(e.data.length/e.interval)).fill("");return t.map((s,n)=>{const r=n*e.interval,c=Number.parseInt(ge(e.data[r].date))%2==0?0:.1,l=e.data[r].minute,u=n===t.length-1?e.data[e.data.length-1]:e.data[r+e.interval].minute;return o(Z,{x1:l,x2:u,y1:e.min,y2:e.max,fill:n%2!=0?`rgba(0, 0, 0, ${.05+c})`:`rgba(0, 0, 0, ${0})`},n)})},X=({style:e})=>o(ee,{isAnimationActive:!1,itemStyle:e,labelStyle:e,content:o(ve,{})});function ve({label:e,payload:t,active:s}){if(s&&t&&t.length){const n=q(e);return i("div",{className:"custom-tooltip",children:[o("div",{className:"custom-tooltip__label",children:n}),i("div",{className:"custom-tooltip__content",children:["Price: "," ",o("span",{children:+t[0].payload.average.toFixed(2)})]})]})}return null}const xe=({data:e})=>{const t=new Set(e.map(n=>n.date)),s=Math.floor(e.length/[...t].length);return[...t].map((n,r)=>o($,{x:e[r*s].minute,stroke:y.daySeparator},n))},Se=({axisProps:e,data:t,interval:s,min:n,max:r,daySize:a})=>{const c=o(M,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,strokeWidth:2}),l=o(T,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return o(b,{height:"100%",width:a*5,children:i(_,{isAnimationActive:!1,data:t,margin:{right:0,bottom:10},children:[H({data:t,interval:s,min:n,max:r}),l,c,j({axisProps:e,interval:s}),L({axisProps:e,min:n,max:r,hide:!0}),A({data:t,daySize:a,style:e.style,isHidden:!1}),X({style:e.style}),xe({data:t})]})})},Ne=e=>{const t=e.indexOf(" ");return e.slice(t+1)},ke=({axisProps:e,previousDayData:t,currentDayData:s,interval:n,min:r,max:a,daySize:c})=>{const l=t.map(h=>S(p({},h),{minute:Ne(h.minute)})),u=o(M,{isAnimationActive:!1,dataKey:"average",name:"Average",dot:!1,stroke:y.accentPrimary,data:s,strokeWidth:2}),m=o(M,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,data:l,strokeWidth:2,hide:!0}),f=o(T,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return o(b,{height:"100%",width:c,children:i(_,{data:s,margin:{right:0,bottom:10},padding:{left:10},children:[H({data:l,interval:n,min:r,max:a}),f,m,u,j({axisProps:e,interval:n}),L({axisProps:e,min:r,max:a,hide:!0}),A({data:s,daySize:c,style:e.style}),o($,{y:t[t.length-1].average,strokeDasharray:"8 5",strokeWidth:1,stroke:y.accentPrimary}),o($,{x:"09:30",strokeWidth:2,stroke:y.daySeparator}),X({style:e.style})]})})},w={tickSize:12,tickMargin:10,tickLine:{stroke:y.coreSecondary3},stroke:y.coreSecondary3,strokeWidth:.5,style:{fontFamily:"Roboto",userSelect:"none",fill:y.keys}},be=()=>{const[e,t]=me(),[s,n]=he(),[r,a]=fe(),c=3,l=1200,u=Math.min(n.min,t.min),m=Math.max(n.max,t.max);let f=!1,h=[];return s&&e&&(h=_e(e),f=s[0].date!==h[0].date),o("div",{className:"chart__container",ref:r,onMouseDown:a,children:i("div",{className:"chart__inner",children:[e||f?o(le,{data:e,interval:c,min:u,max:m,axisProps:w}):null,e?o(Se,{daySize:l,axisProps:w,data:e,interval:c,min:u,max:m}):null,f?o(ke,{daySize:l,axisProps:w,previousDayData:h,currentDayData:s,interval:c,min:u,max:m}):null]})})},_e=e=>{const t=e[e.length-1].date;return e.filter(s=>s.date===t)};const $e="https://sandbox.iexapis.com/stable/",Me="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",Ae=async e=>{try{return(await fetch(`${$e}/stock/${e}/news/last/3?${Me}`)).json()}catch(t){console.error(t)}},x=(e,t)=>{const s=Math.floor(e/t),n=e%t;return[s,n]},Le=e=>{let t="Error";const s=Date.now()-e,[n,r]=x(s,3154e7);n>0&&(t="Over a year");const[a,c]=x(r,2628e6);a>0&&(a===1?t="1 month":t=`${a} months`);const[l,u]=x(c,864e5);l>0&&(l===1?t="1 day":t=`${l} days`);const[m,f]=x(u,36e5);m>0&&(m===1?t="1 hour":t=`${m} hours`);const[h,N]=x(f,6e4);h>0&&(h===1?t="1 minute":t=`${h} minutes`);const[k,V]=x(N,1e3);return k>0&&(k===1?t="1 second":t=`${k} seconds`),V>0?"Now":t+" ago"};function we(){const[e,t]=d.exports.useState(null),{symbol:s}=v();return d.exports.useEffect(()=>{Ae(s).then(n=>{t(n)})},[s]),e?i("div",{className:"newsfeed__background",children:[o("h2",{className:"latest-news-text",children:"Latest News"}),e.map(n=>o(Pe,{link:n.url,content:n.headline,timeSincePublication:n.datetime,source:n.source},n.headline))]}):null}function Pe({link:e,content:t,timeSincePublication:s,source:n}){const r=Le(s);return i("div",{className:"article",children:[o("a",{href:e,children:o("h3",{className:"article__content",children:t})}),o("p",{className:"article__time-source",children:`${r} - ${n}`})]})}const Ce="https://sandbox.iexapis.com/stable",Ie=async e=>{const t=`${Ce}/stock/${e}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return(await fetch(t)).json()};const Ee=()=>{const[e,t]=d.exports.useState({}),{symbol:s}=v();return d.exports.useEffect(()=>{Ie(s).then(n=>{const r=n.description.substring(0,500);t(S(p({},n),{description:r}))})},[s]),Object.keys(e).length===0?"Loading...":i("div",{className:"company__summary",children:[o("h2",{children:"Company Summary"}),o("div",{className:"company__name",children:`${e.companyName} (${e.symbol})`}),o("div",{className:"company__website",children:e.website}),o("div",{className:"company__description",children:e.description})]})};async function Te(e){return Promise.resolve(["QCOM","MSI","ERIC","AMAZN","GOOGL","MSFT","DELL"])}const Re=()=>{const[e,t]=d.exports.useState(),{symbol:s,setSymbol:n}=v();return d.exports.useEffect(()=>{Te().then(r=>{t(r)})},[s]),i("div",{className:"top_peers",children:[o("h2",{children:"Top Peers"}),o("div",{className:"peers__buttons",children:e==null?void 0:e.map(r=>o("button",{className:"peer",onClick:()=>n(r),children:r},r))})]})},Fe=e=>{const[t,s]=d.exports.useState(),n=`https://sandbox-sse.iexapis.com/stable/stocksUS?symbols=${e}&token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return d.exports.useEffect(()=>{const r=new EventSource(n);return r.onmessage=a=>{JSON.parse(a.data).length!==0?s(JSON.parse(a.data)):console.log("Just got an empty message")},r.onerror=a=>{console.log(a),r.close()},()=>r.close()},[n]),t};var Oe="./assets/redarrow.13e4b84f.svg",De="./assets/normal.957bc0c0.svg";const Ue=()=>{const{symbol:e}=v(),t=Fe(e);return i("div",{className:"price__display",children:[o("span",{className:"price",children:`$${t==null?void 0:t[0].latestPrice.toFixed(2)}`}),o("img",{className:"arrow",src:(t==null?void 0:t[0].change)>0?De:Oe,alt:"down arrow"}),o("span",{className:(t==null?void 0:t[0].change)>0?"change positive":"change negative",children:`${t==null?void 0:t[0].change} | ${t==null?void 0:t[0].changePercent.toFixed(2)}%`})]})};var Ke="./assets/ra-logo.caf30fde.svg";function qe(){const[e,t]=d.exports.useState(0);return d.exports.useEffect(()=>{e<6&&setTimeout(()=>{t(s=>s+1)},[200])},[e]),i("div",{className:"App",children:[o("div",{className:"logo-section",children:o("img",{src:Ke,height:120,className:"logo",alt:"Reactive Analystics Logo"})}),i(ae,{children:[i("div",{className:"main-section",children:[o("div",{children:e>0?o(Ue,{}):null}),e>1?o(be,{}):null,e>2?o(ce,{}):null]}),i("div",{className:"news-summary-section",children:[e>3?o(we,{}):null,e>4?o(Ee,{}):null,e>5?o(Re,{}):null]})]})]})}te.render(o(se.StrictMode,{children:o(qe,{})}),document.getElementById("root"));
