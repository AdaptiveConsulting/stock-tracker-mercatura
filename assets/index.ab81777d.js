var le=Object.defineProperty,ie=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var V=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))ue.call(t,r)&&V(e,r,t[r]);if(G)for(var r of G(t))_e.call(t,r)&&V(e,r,t[r]);return e},x=(e,t)=>ie(e,de(t));import{j as l,a as s,r as u,X as U,T as q,R as P,L as I,Y as he,b as me,c as pe,d as D,e as M,C as H,F as ye,f as fe,g as ve}from"./vendor.f0c33521.js";const Ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}};Ne();const R=e=>"$"+e,K=e=>{const t=e.toString();if(t.length<=3)return t;const r=["","K","M","B","T"],a=Math.floor(e.toString().length/3),o=Math.floor(e.toString().length%3)===0?a-1:a,c=Math.floor(e)/Math.pow(1e3,o),n=e.toString().length%3==0?a-1:a;return c.toFixed(2)+r[n]};const ge=({stats:{open:e,high:t,low:r,previousClose:a,week52High:o,week52Low:c,marketCap:n,peRatio:i,dividendYield:_,incomeNetPerWabsoSplitAdjusted:h,volume:p,avgTotalVolume:m}})=>l("div",{className:"stats-container",children:[l("ul",{className:"stats__list",children:[l("li",{children:["Open ",s("span",{children:e?R(e):"-"})]}),l("li",{children:["High ",s("span",{children:t?R(t):"-"})]}),l("li",{children:["Low ",s("span",{children:r?R(r):"-"})]}),l("li",{children:["Previous Close ",s("span",{children:R(a)})]})]}),l("ul",{className:"stats__list middle-section",children:[l("li",{children:["Day Range"," ",s("span",{children:t?R(`${t} - ${r}`):"-"})]}),l("li",{children:["52 Week Range"," ",s("span",{children:R(`${o} - ${c}`)})]}),l("li",{children:["Market Cap ",s("span",{children:K(n)})]}),l("li",{children:["P/E Ratio ",s("span",{children:i})]})]}),l("ul",{className:"stats__list",children:[l("li",{children:["Dividend Yield"," ",s("span",{children:(_==null?void 0:_.toFixed(2))+"%"})]}),l("li",{children:["Earnings Per Share"," ",s("span",{children:R(h==null?void 0:h.toFixed(2))})]}),l("li",{children:["Volume ",s("span",{children:p!=null?p:"-"})]}),l("li",{children:["Total Avg. Volume"," ",s("span",{children:K(m)})]})]})]}),f=e=>new Promise((t,r)=>{e.ok?e.json().then(a=>t(a)):r(`server responded with error code: ${e.status} ${e.statusText}`)}),B="https://sandbox.iexapis.com/stable/";async function be(e){const t=`${B}stock/${e}/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,r=`${B}time-series/FUNDAMENTAL_VALUATIONS/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,a=await fetch(t),o=await fetch(r),c=await f(a),n=await f(o);return g(g({},c),n[0])}const W=u.exports.createContext("AAPL"),v=()=>u.exports.useContext(W),we=({children:e})=>{const[t,r]=u.exports.useState("AAPL");return s(W.Provider,{value:{symbol:t,setSymbol:r},children:e})},E=()=>{const[e,t]=u.exports.useState(1);return u.exports.useEffect(()=>{let r=!1;const a=setInterval(()=>{t(o=>(o>=1&&(r=!1),o<=0&&(r=!0),r?o+.01:o-.01))},15);return()=>clearInterval(a)},[]),e};function X(){const e=E();return l("div",{className:"stats__placeholder",style:{opacity:e},children:[l("div",{className:"stats__placeholder__column",children:[l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]})]}),l("div",{className:"stats__placeholder__column stats__placeholder__column__center",children:[l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]})]}),l("div",{className:"stats__placeholder__column",children:[l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]}),l("div",{className:"stats__placeholder__row",children:[s("div",{className:"stats__placeholder__row__title"}),s("div",{className:"stats__placeholder__row__content"})]})]})]})}const Y=u.exports.createContext(0),b=()=>u.exports.useContext(Y),Se=({children:e})=>{const[t,r]=u.exports.useState(-1);return u.exports.useEffect(()=>{console.log(t)},[t]),s(Y.Provider,{value:{renderFlag:t,setRenderFlag:r},children:e})},w={chart:0,summary:1,livePrice:2,newsFeed:3,search:4,stats:5,topPeers:6};var d={RESOLVED:"resolved",LOADING:"loading",ERROR:"error"};const Re=()=>{const[e,t]=u.exports.useState({status:d.LOADING,body:null}),{symbol:r}=v(),{renderFlag:a}=b(),o=async()=>{try{const n=await be(r);t({status:d.RESOLVED,body:n})}catch(n){console.error("Error requesting key statistic data: "+n),t({status:d.ERROR,body:null})}};return u.exports.useEffect(()=>{a===w.stats?o():a===-1&&t({status:d.LOADING,body:null})},[r,a]),(()=>{let n=null;if(e.status===d.LOADING)n=s(X,{});else if(e.status===d.ERROR)n=s(X,{});else if(e.status===d.RESOLVED)n=s(ge,{stats:e.body});else throw Error("Unrecognised state status in stats component: "+e.status);return l("div",{className:"stats",children:[s("h2",{className:"stats__title",children:"Key Statistics"}),n]})})()},y={accentPrimary:"#aaabd1",accentBeAware2:"#ffc57f",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",daySeparator:"#7fb3ff",keys:"#7f7f7f"};const j="https://sandbox.iexapis.com/stable/",J="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",xe=async e=>{const t=await fetch(`${j}/stock/${e}/intraday-prices?${J}&chartInterval=10`);return await f(t)},Ee=async e=>{const t=await fetch(`${j}/stock/${e}/chart/5dm?${J}`);return await f(t)},z=e=>e.filter(t=>t.average!==null),ke=e=>{const[t,r]=u.exports.useState({status:"loading",body:null}),[a,o]=u.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{renderFlag:c}=b();return u.exports.useEffect(()=>{(async()=>{if(c===w.chart)try{const n=await Ee(e);console.log("Historic prices retrieved: "),console.log(n);const i=z(n);o(Q(i)),i.length&&i.push(x(g({},i[i.length-1]),{minute:"16:00"}));const _=i.map((h,p)=>x(g({},h),{minute:p.toString()+" "+h.minute}));r({status:"resolved",body:_})}catch(n){console.error("Error requesting historical prices: "+n),r({status:"error",body:null})}else c===-1&&r({status:"loading",body:null})})()},[e,c]),[t,r,a]},Le=e=>{const[t,r]=u.exports.useState({status:"loading",body:null}),[a,o]=u.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{renderFlag:c}=b();return u.exports.useEffect(()=>{(async()=>{if(c===w.chart)try{const n=await xe(e);console.log("Intraday prices retrieved: "),console.log(n);const i=z(n);o(Q(i)),r({status:"resolved",body:i})}catch(n){console.error("Error requesting intraday prices: "+n),r({status:"error",body:null})}else c===-1&&r({status:"loading",body:null})})()},[e,c]),[t,a]},Q=e=>{const t=e.map(o=>o.average),r=Math.floor(Math.min(...t)),a=Math.floor(Math.max(...t)+1);return{min:r,max:a}},$e=()=>{const e=u.exports.useRef(null);let t={left:0,x:0};const r=n=>{t={left:e.current.scrollLeft,x:n.clientX},document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)},a=n=>{const i=n.clientX-t.x;e.current.scrollLeft=t.left-i},o=n=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o)};return[e,r,n=>{e.current&&(e.current.scrollLeft=n)}]},Ae=({x:e,dx:t,y:r,dy:a,style:o,payload:c})=>s(q,{x:e+t,y:r+a,fontSize:16,style:o,children:c.value}),C=({data:e,daySize:t,style:r,isHidden:a})=>{const o=new Set(e.map(n=>n.date)),c=Math.floor(e.length/[...o].length);return s(U,{xAxisId:"top",type:"category",dataKey:"date",tick:s(Ae,{}),stroke:y.daySeparator,tickLine:!a,interval:c-1,allowDuplicatedCategory:!0,orientation:"top",style:r,axisLine:!1,dx:t/2-70,dy:-10,margin:{bottom:50}})},Oe=({data:e,axisProps:t,min:r,max:a})=>s("div",{className:"static-y-axis",children:s(P,{height:"100%",width:61,children:l(I,{data:e,margin:{bottom:40},children:[F({axisProps:t,min:r,max:a}),C({data:e,style:t.style,isHidden:!0})]})})});function F({axisProps:e,min:t,max:r,hide:a}){const{tickSize:o,tickMargin:c,tickLine:n,stroke:i,strokeWidth:_,style:h}=e;return s(he,{type:"number",dataKey:"average",domain:[t,r],tickSize:o,tickCount:5,tickMargin:c,tickLine:n,stroke:i,strokeWidth:_,style:h,hide:a})}const Z=e=>{const t=Pe(e);if(typeof t!="string"||!t.match(/(\d?\d:\d\d){1}/))throw new Error("cleanTimeString must be a string in the format m:hh or mm:hh");{const r=Number.parseInt(t.slice(0,-2));if(r===12)return t+" PM";const a=r>12?"PM":"AM",o=t.slice(-2);return`${r%12}:${o} ${a}`}},Pe=e=>{if(typeof e=="string"){const t=e.indexOf(" ");return e.slice(t+1)}return e},Ie=({x:e,y:t,payload:r,style:a,index:o})=>{let c=Z(r.value);c==="4:00 PM"&&(c="");let n=c==="9:30 AM"?"start":"middle";return s(q,{x:e,y:t+10,textAnchor:n,fill:y.keys,style:a,fontSize:12,children:c})};function ee({axisProps:e,interval:t}){const{tickSize:r,tickMargin:a,tickLine:o,stroke:c,strokeWidth:n,style:i}=e;return s(U,{type:"category",dataKey:"minute",tick:s(Ie,{}),axisLine:!1,interval:t-1,tickSize:r,tickMargin:a,tickLine:o,stroke:c,strokeWidth:n,style:i,allowDuplicatedCategory:!1})}const De=e=>e.slice(-2),te=e=>{const t=new Array(Math.ceil(e.data.length/e.interval)).fill("");return t.map((r,a)=>{const o=a*e.interval,n=Number.parseInt(De(e.data[o].date))%2==0?0:.1,i=e.data[o].minute,_=a===t.length-1?e.data[e.data.length-1]:e.data[o+e.interval].minute;return s(me,{x1:i,x2:_,y1:e.min,y2:e.max,fill:a%2!=0?`rgba(0, 0, 0, ${.05+n})`:`rgba(0, 0, 0, ${0})`},a)})},se=({style:e})=>s(pe,{isAnimationActive:!1,itemStyle:e,labelStyle:e,content:s(Me,{})});function Me({label:e,payload:t,active:r}){if(r&&t&&t.length){const a=Z(e);return l("div",{className:"custom-tooltip",children:[s("div",{className:"custom-tooltip__label",children:a}),l("div",{className:"custom-tooltip__content",children:["Price: "," ",s("span",{children:+t[0].payload.average.toFixed(2)})]})]})}return null}const Ce=({data:e})=>{const t=new Set(e.map(a=>a.date)),r=Math.floor(e.length/[...t].length);return[...t].map((a,o)=>s(D,{x:e[o*r].minute,stroke:y.daySeparator},a))},Fe=({axisProps:e,data:t,interval:r,min:a,max:o,daySize:c})=>{const n=s(M,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,strokeWidth:2}),i=s(H,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return s(P,{height:"100%",width:c*5,children:l(I,{isAnimationActive:!1,data:t,margin:{right:0,bottom:10},children:[te({data:t,interval:r,min:a,max:o}),i,n,ee({axisProps:e,interval:r}),F({axisProps:e,min:a,max:o,hide:!0}),C({data:t,daySize:c,style:e.style,isHidden:!1}),se({style:e.style}),Ce({data:t})]})})},Te=e=>{const t=e.indexOf(" ");return e.slice(t+1)},Ge=({axisProps:e,previousDayData:t,currentDayData:r,interval:a,min:o,max:c,daySize:n})=>{const i=t.map(m=>x(g({},m),{minute:Te(m.minute)})),_=s(M,{isAnimationActive:!1,dataKey:"average",name:"Average",dot:!1,stroke:y.accentPrimary,data:r,strokeWidth:2}),h=s(M,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,data:i,strokeWidth:2,hide:!0}),p=s(H,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return s(P,{height:"100%",width:n,children:l(I,{data:r,margin:{right:0,bottom:10},padding:{left:10},children:[te({data:i,interval:a,min:o,max:c}),p,h,_,ee({axisProps:e,interval:a}),F({axisProps:e,min:o,max:c,hide:!0}),C({data:r,daySize:n,style:e.style}),s(D,{y:t[t.length-1].average,strokeDasharray:"8 5",strokeWidth:1,stroke:y.accentPrimary}),s(D,{x:"09:30",strokeWidth:2,stroke:y.daySeparator}),se({style:e.style})]})})};function k(){const e=E();return s("div",{className:"chart__placeholder",style:{opacity:e}})}const T={tickSize:12,tickMargin:10,tickLine:{stroke:y.coreSecondary3},stroke:y.coreSecondary3,strokeWidth:.5,style:{fontFamily:"Roboto",userSelect:"none",fill:y.keys}},Ve=()=>{const[e,t]=u.exports.useState(!0),{symbol:r}=v(),[a,o,c]=ke(r),[n,i]=Le(r),[_,h,p]=$e(),m=3,O=1200,S=Math.min(i.min,c.min),A=Math.max(i.max,c.max);return u.exports.useEffect(()=>{if(p(_.current.scrollWidth),!e&&n.status===d.RESOLVED){const N=[...a.body];N[a.body.length-1]=x(g({},N[a.body.length-1]),{average:n.body[0].average}),o({status:a.status,body:N})}},[e]),u.exports.useEffect(()=>{n.status!==d.LOADING&&a.status===d.RESOLVED?t(!1):t(!0)},[n,a]),s("div",{className:"chart__container",ref:_,onMouseDown:h,children:(()=>{const N=[];if(a.status===d.LOADING&&n.status===d.LOADING)return s(k,{});if(a.status===d.ERROR&&n.status===d.ERROR)return s(k,{});if(a.status===d.LOADING&&n.status===d.ERROR)return s(k,{});if(a.status===d.ERROR&&n.status===d.LOADING)return s(k,{});if(a.status===d.ERROR&&n.status===d.RESOLVED)return s(k,{});if(a.status===d.LOADING&&n.status===d.RESOLVED)return s(k,{});if(a.status===d.RESOLVED)N.push(s(Oe,{data:a.body||n.body,interval:m,min:S,max:A,axisProps:T},0)),N.push(s(Fe,{daySize:O,axisProps:T,data:a.body,interval:m,min:S,max:A},1)),n.status===d.RESOLVED&&N.push(s(Ge,{daySize:O,axisProps:T,previousDayData:Ue(a.body),currentDayData:n.body,interval:m,min:S,max:A},2));else throw Error(`Unrecognised state status in Chart component: 
Historical Prices Status: ${a.status}
Intraday Prices Status: ${n.status}`);return s("div",{className:"chart__inner",children:N})})()})},Ue=e=>{try{const t=e[e.length-1].date;return e.filter(r=>r.date===t).slice(0,-1)}catch(t){console.error("Error filtering previous day in chart from prices array: "+t),console.error("Prices array: "),console.error(e)}};const qe="https://sandbox.iexapis.com/stable/",He="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",Ke=async e=>{const t=await fetch(`${qe}/stock/${e}/news/last/3?${He}`);return await f(t)},L=(e,t)=>{const r=Math.floor(e/t),a=e%t;return[r,a]},$={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2628e6,year:3154e7},Be=e=>{let t="Error";const r=Date.now()-e,[a,o]=L(r,$.year);a>0&&(t="Over a year");const[c,n]=L(o,$.month);c>0&&(c===1?t="1 month":t=`${c} months`);const[i,_]=L(n,$.day);i>0&&(i===1?t="1 day":t=`${i} days`);const[h,p]=L(_,$.hour);h>0&&(h===1?t="1 hour":t=`${h} hours`);const[m,O]=L(p,$.minute);m>0&&(m===1?t="1 minute":t=`${m} minutes`);const[S,A]=L(O,$.second);return S>0&&(S===1?t="1 second":t=`${S} seconds`),A>0?"Now":t+" ago"};function re(){const e=E();return l("div",{style:{opacity:e},children:[l("div",{className:"news__placeholder",children:[s("div",{className:"news__placeholder__title"}),s("div",{className:"news__placeholder__title news__placeholder__title--short"}),s("div",{className:"news__placeholder__footer"})]}),l("div",{className:"news__placeholder",children:[s("div",{className:"news__placeholder__title"}),s("div",{className:"news__placeholder__title news__placeholder__title--short"}),s("div",{className:"news__placeholder__footer"})]}),l("div",{className:"news__placeholder",children:[s("div",{className:"news__placeholder__title"}),s("div",{className:"news__placeholder__title news__placeholder__title--short"}),s("div",{className:"news__placeholder__footer"})]})]})}function We(){const[e,t]=u.exports.useState({status:d.LOADING,body:null}),{symbol:r}=v(),{renderFlag:a}=b();u.exports.useEffect(()=>{a===w.newsFeed?Ke(r).then(n=>{t({status:d.RESOLVED,body:n})}).catch(n=>{console.error("Error requesting news data: "+n),t({status:d.ERROR,body:null})}):a===-1&&t({status:d.LOADING,body:null})},[r,a]);const o=[Date.now()-1e5,Date.now()-36e5*2,Date.now()-864e5];return(()=>{let n=null;if(e.status===d.LOADING)n=s(re,{});else if(e.status===d.ERROR)n=s(re,{});else if(e.status===d.RESOLVED)n=e.body.map((i,_)=>s(Xe,{link:i.url,content:i.headline,timeSincePublication:o[_],source:i.source},i.headline));else throw Error("Unrecognised state status in news feed component: "+e.status);return l("div",{className:"newsfeed__background",children:[s("h2",{className:"latest-news-text",children:"Latest News"}),n]})})()}function Xe({link:e,content:t,timeSincePublication:r,source:a}){const o=Be(r);return l("div",{className:"article",children:[s("a",{href:e,children:s("h3",{className:"article__content",children:t})}),s("p",{className:"article__time-source",children:`${o} - ${a}`})]})}const Ye="https://sandbox.iexapis.com/stable",ae=async e=>{const t=`${Ye}/stock/${e}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,r=await fetch(t);return await f(r)};function ne(){const e=E();return l("div",{className:"summary-placeholder",style:{opacity:e},children:[s("div",{className:"summary-placeholder__title"}),s("div",{className:"summary-placeholder__content"}),s("div",{className:"summary-placeholder__content"}),s("div",{className:"summary-placeholder__content summary-placeholder__content--short"}),s("div",{className:"summary-placeholder__content"}),s("div",{className:"summary-placeholder__content summary-placeholder__content--short"}),s("div",{className:"summary-placeholder__content"}),s("div",{className:"summary-placeholder__content"}),s("div",{className:"summary-placeholder__content summary-placeholder__content--short"})]})}const je=()=>{const[e,t]=u.exports.useState({status:"loading",body:null}),{symbol:r}=v(),{renderFlag:a}=b(),o=async()=>{try{const n=await ae(r),i=n.description.substring(0,500).concat("..."),_=x(g({},n),{description:i});t({status:"resolved",body:_})}catch(n){console.error("Error retreiving company summary data: "+n),t({status:"error",body:null})}};return u.exports.useEffect(()=>{a===w.summary?o():a===-1&&t({status:"loading",body:null})},[r,a]),(()=>{let n=null;return e.status==="loading"&&(n=s(ne,{})),e.status==="error"&&(n=s(ne,{})),e.status==="resolved"&&(n=l(ye,{children:[s("div",{className:"company__name",children:`${e.body.companyName} (${e.body.symbol})`}),s("div",{className:"company__website",children:e.body.website}),s("div",{className:"company__description",children:e.body.description})]})),l("div",{className:"company__summary",children:[s("h2",{children:"Company Summary"}),n]})})()};async function Je(e){const t=await ze(!0);return await f(t)}const ze=e=>{const t=["QCOM","MSI","ERIC","AMZN","GOOGL","MSFT","DELL"],a={ok:!0,json:()=>Promise.resolve(t)},o={ok:!1};return e?Promise.resolve(a):Promise.reject(o)};function oe(){const e=E();return l("div",{className:"peers__placeholder",style:{opacity:e},children:[s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"}),s("div",{className:"peers__placeholder__button"})]})}const Qe=()=>{const[e,t]=u.exports.useState({status:d.LOADING,body:null}),{symbol:r,setSymbol:a}=v(),{renderFlag:o}=b();return u.exports.useEffect(()=>{o===w.topPeers?Je().then(n=>{t({status:d.RESOLVED,body:n})}).catch(n=>{console.error("Error retrieving top peers data: "+n),t({status:d.ERROR,body:null})}):o===-1&&t({status:d.LOADING,body:null})},[r,o]),(()=>{let n=null;if(e.status===d.LOADING)n=s(oe,{});else if(e.status===d.ERROR)n=s(oe,{});else if(e.status===d.RESOLVED)n=s("div",{className:"peers__buttons",children:e.body.map(i=>s("button",{className:"peer",onClick:()=>a(i),children:i},i))});else throw Error("Unrecognised state status in top peers component: "+e.status);return l("div",{className:"top_peers",children:[s("h2",{className:"peers__title",children:"Top Peers"}),n]})})()};function ce(){const e=E();return l("div",{className:"live-price__placeholder",style:{opacity:e},children:[s("div",{className:"live-price__placeholder__price"}),s("div",{className:"live-price__placeholder__arrow"}),s("div",{className:"live-price__placeholder__change"})]})}const Ze="https://sandbox.iexapis.com/stable",et="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",tt=async e=>{const t=await fetch(`${Ze}/stock/${e}/quote?${et}`);return await f(t)},st=e=>{const[t,r]=u.exports.useState({status:d.LOADING,body:null}),a=`https://sandbox-sse.iexapis.com/stable/stocksUS?symbols=${e}&token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,{renderFlag:o}=b();return u.exports.useEffect(()=>{if(o>w.livePrice){const c=new EventSource(a);return c.onopen=()=>{console.log("SSE connection established")},c.onmessage=n=>{JSON.parse(n.data).length!==0?r({status:d.RESOLVED,body:JSON.parse(n.data)}):console.log("Just got an empty message")},c.onerror=async n=>{console.log(n),c.close();try{const i=await tt(e);r({status:d.RESOLVED,body:[i]})}catch(i){console.error(i),r({status:d.ERROR,body:i})}},()=>c.close()}else o===-1&&r({status:d.LOADING,body:null})},[a,e,o]),t};var rt="./assets/redarrow.13e4b84f.svg",at="./assets/normal.957bc0c0.svg";const nt=({searchFocused:e})=>{const{symbol:t}=v(),r=st(t);return(()=>{if(r.status===d.LOADING)return s(ce,{});if(r.status===d.ERROR)return s(ce,{});if(r.status===d.RESOLVED)return s(ot,{price:r.body,searchFocused:e});throw Error("Unrecognised state status in live price component: "+r.status)})()},ot=({price:e,searchFocused:t})=>l("div",{className:`price__display ${t?"price__display--hidden":null}`,children:[s("span",{className:"price",children:`$${e==null?void 0:e[0].latestPrice.toFixed(2)}`}),s("img",{className:"arrow",src:(e==null?void 0:e[0].change)>0?at:rt,alt:"down arrow"}),s("span",{className:(e==null?void 0:e[0].change)>0?"change positive":"change negative",children:`${e==null?void 0:e[0].change} | ${e==null?void 0:e[0].changePercent.toFixed(2)}%`})]}),ct=({suggestions:e})=>{const{setSymbol:t}=v();return s("div",{className:"suggestions",children:l("ul",{className:"suggestions__list",children:[s("div",{className:"suggestions__title",children:"Stock"}),e==null?void 0:e.map((r,a)=>l("li",{className:"suggestions__stock",onClick:()=>t(r.symbol),children:[r.symbol," - ",r.name]},a))]})})},lt="https://sandbox.iexapis.com/stable/",it=async e=>{const t=`${lt}search/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const r=await fetch(t);return await f(r)}catch(r){console.log(r)}},dt=e=>{const[t,r]=u.exports.useState();return u.exports.useEffect(()=>(e&&it(e).then(a=>{r(a.slice(0,-2))}),()=>r(null)),[e]),t!=null?t:null},ut=({focused:e,onFocus:t,onBlur:r})=>{const[a,o]=u.exports.useState(""),c=dt(a),{symbol:n}=v(),i=({target:_})=>{o(_.value)};return u.exports.useEffect(()=>{ae(n).then(_=>{o(`${_.symbol} - ${_.companyName}`)}).catch(_=>{console.error("Error requesting company info for search bar: "+_)})},[n]),l("div",{className:"searchbar",children:[s("div",{className:"field",children:s("input",{type:"text",id:"search",value:a,placeholder:"Enter a stock, symbol or currency",onChange:i,onFocus:t,onBlur:r})}),e?s(ct,{suggestions:c}):null]})},_t=({focused:e,setFocused:t})=>l("div",{className:e?"stock__header":"stock__header grayborder",children:[s(ut,{focused:e,onFocus:()=>t(!0)}),s(nt,{searchFocused:e})]});var ht="./assets/ra-logo.70145db3.svg";function mt(){const[e,t]=u.exports.useState(!1),{symbol:r}=v(),{setRenderFlag:a}=b();return u.exports.useEffect(()=>{a(-1);const o=setInterval(()=>{a(c=>c+1)},[200]);setTimeout(()=>{clearInterval(o)},[Object.keys(w).length*300])},[r]),l("div",{className:"App",children:[s("div",{className:"logo-section",onClick:()=>t(!1),children:s("img",{src:ht,height:120,className:"logo",alt:"Reactive Analystics Logo"})}),l("div",{className:"main-section",children:[s(_t,{focused:e,setFocused:t}),s(Ve,{}),s(Re,{})]}),l("div",{className:"news-summary-section",children:[s(We,{}),s(je,{}),s(Qe,{})]})]})}fe.render(s(ve.StrictMode,{children:s(Se,{children:s(we,{children:s(mt,{})})})}),document.getElementById("root"));
