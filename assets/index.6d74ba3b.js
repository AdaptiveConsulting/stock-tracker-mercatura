var j=Object.defineProperty,J=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var C=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,S=(e,t)=>{for(var s in t||(t={}))ee.call(t,s)&&C(e,s,t[s]);if(T)for(var s of T(t))te.call(t,s)&&C(e,s,t[s]);return e},N=(e,t)=>J(e,Z(t));import{j as i,a,r as l,X as O,T as D,R as A,L as w,Y as se,b as ne,c as re,d as L,e as E,C as F,f as oe,g as ae}from"./vendor.793977f0.js";const ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};ce();const b=e=>"$"+e,U=e=>{const t=e.toString();if(t.length<=3)return t;const s=["","K","M","B","T"],r=Math.floor(e.toString().length/3),n=Math.floor(e.toString().length%3)===0?r-1:r,o=Math.floor(e)/Math.pow(1e3,n),c=e.toString().length%3==0?r-1:r;return o.toFixed(2)+s[c]};const ie=({stats:{open:e,high:t,low:s,previousClose:r,week52High:n,week52Low:o,marketCap:c,peRatio:d,dividendYield:u,incomeNetPerWabsoSplitAdjusted:h,volume:m,avgTotalVolume:f}})=>i("div",{className:"stats",children:[a("h2",{className:"stats__title",children:"Key Statistics"}),i("div",{className:"stats-container",children:[i("ul",{className:"stats__list",children:[i("li",{children:["Open ",a("span",{children:e?b(e):"-"})]}),i("li",{children:["High ",a("span",{children:t?b(t):"-"})]}),i("li",{children:["Low ",a("span",{children:s?b(s):"-"})]}),i("li",{children:["Previous Close ",a("span",{children:b(r)})]})]}),i("ul",{className:"stats__list middle-section",children:[i("li",{children:["Day Range"," ",a("span",{children:t?b(`${t} - ${s}`):"-"})]}),i("li",{children:["52 Week Range"," ",a("span",{children:b(`${n} - ${o}`)})]}),i("li",{children:["Market Cap ",a("span",{children:U(c)})]}),i("li",{children:["P/E Ratio ",a("span",{children:d})]})]}),i("ul",{className:"stats__list",children:[i("li",{children:["Dividend Yield ",a("span",{children:(u==null?void 0:u.toFixed(2))+"%"})]}),i("li",{children:["Earnings Per Share"," ",a("span",{children:b(h==null?void 0:h.toFixed(2))})]}),i("li",{children:["Volume ",a("span",{children:m!=null?m:"-"})]}),i("li",{children:["Total Avg. Volume ",a("span",{children:U(f)})]})]})]})]}),x=e=>new Promise((t,s)=>{e.ok?e.json().then(r=>t(r)):s(`server responded with error code: ${e.status} ${e.statusText}`)}),H="https://sandbox.iexapis.com/stable/";async function le(e){const t=`${H}stock/${e}/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,s=`${H}time-series/FUNDAMENTAL_VALUATIONS/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const r=await fetch(t),n=await fetch(s);console.log("Quote Response:"),console.log(r);const o=await x(r),c=await x(n);return{body:S(S({},o),c[0]),error:!1}}catch(r){return console.error("Error in key statistics request: ",r),{error:!0,body:"ERROR LOADING KEY STATISTICS"}}}const q=l.exports.createContext("AAPL"),g=()=>l.exports.useContext(q),de=({children:e})=>{const[t,s]=l.exports.useState("AAPL");return a(q.Provider,{value:{symbol:t,setSymbol:s},children:e})},ue=()=>{const[e,t]=l.exports.useState(null),{symbol:s}=g();return l.exports.useEffect(()=>{le(s).then(r=>{console.log("Response: "),console.log(r),t(r)}).catch(r=>console.error(r))},[s]),e?e.error?e.body:a(ie,{stats:e.body}):"Loading..."},y={accentPrimary:"#aaabd1",accentBeAware2:"#ffc57f",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",daySeparator:"#7fb3ff",keys:"#7f7f7f"},he=({x:e,dx:t,y:s,dy:r,style:n,payload:o})=>a(D,{x:e+t,y:s+r,fontSize:16,style:n,children:o.value}),R=({data:e,daySize:t,style:s,isHidden:r})=>{const n=new Set(e.map(c=>c.date)),o=Math.floor(e.length/[...n].length);return a(O,{xAxisId:"top",type:"category",dataKey:"date",tick:a(he,{}),stroke:y.daySeparator,tickLine:!r,interval:o-1,allowDuplicatedCategory:!0,orientation:"top",style:s,axisLine:!1,dx:t/2-70,dy:-10,margin:{bottom:50}})},me=({data:e,axisProps:t,min:s,max:r})=>a("div",{className:"static-y-axis",children:a(A,{height:"100%",width:61,children:i(w,{data:e,margin:{bottom:40},children:[P({axisProps:t,min:s,max:r}),R({data:e,style:t.style,isHidden:!0})]})})});function P({axisProps:e,min:t,max:s,hide:r}){const{tickSize:n,tickMargin:o,tickLine:c,stroke:d,strokeWidth:u,style:h}=e;return a(se,{type:"number",dataKey:"average",domain:[t,s],tickSize:n,tickCount:5,tickMargin:o,tickLine:c,stroke:d,strokeWidth:u,style:h,hide:r})}const K="https://sandbox.iexapis.com/stable/",G="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",fe=async e=>{try{const t=await fetch(`${K}/stock/${e}/intraday-prices?${G}&chartInterval=10`);return await x(t)}catch(t){console.error("Error retrieving intraday prices for chart: "+t)}},ye=async e=>{try{const t=await fetch(`${K}/stock/${e}/chart/5dm?${G}`);return await x(t)}catch(t){console.error("Error retrieving historical prices for chart: "+t)}},V=e=>e.filter(t=>t.average!==null),pe=()=>{const[e,t]=l.exports.useState(null),[s,r]=l.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:n}=g();return l.exports.useEffect(()=>{(async()=>{try{const o=await ye(n);console.log("Historic prices retrieved: "),console.log(o);const c=V(o);r(W(c)),c.length&&c.push(N(S({},c[c.length-1]),{minute:"16:00"}));const d=c.map((u,h)=>N(S({},u),{minute:h.toString()+" "+u.minute}));t(d)}catch{t([])}})()},[n]),[e,t,s]},ge=()=>{const[e,t]=l.exports.useState(null),[s,r]=l.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:n}=g();return l.exports.useEffect(()=>{(async()=>{try{const o=await fe(n);console.log("Intraday prices retrieved: "),console.log(o);const c=V(o);r(W(c)),t(c)}catch{t([])}})()},[n]),[e,s]},W=e=>{const t=e.map(n=>n.average),s=Math.floor(Math.min(...t)),r=Math.floor(Math.max(...t)+1);return{min:s,max:r}},Se=()=>{const e=l.exports.useRef(null);let t={left:0,x:0};const s=c=>{t={left:e.current.scrollLeft,x:c.clientX},document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)},r=c=>{const d=c.clientX-t.x;e.current.scrollLeft=t.left-d},n=c=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n)};return[e,s,c=>{e.current&&(e.current.scrollLeft=c)}]},B=e=>{const t=xe(e);if(typeof t!="string"||!t.match(/(\d?\d:\d\d){1}/))throw new Error("cleanTimeString must be a string in the format m:hh or mm:hh");{const s=Number.parseInt(t.slice(0,-2));if(s===12)return t+" PM";const r=s>12?"PM":"AM",n=t.slice(-2);return`${s%12}:${n} ${r}`}},xe=e=>{if(typeof e=="string"){const t=e.indexOf(" ");return e.slice(t+1)}return e},ve=({x:e,y:t,payload:s,style:r,index:n})=>{let o=B(s.value);o==="4:00 PM"&&(o="");let c=o==="9:30 AM"?"start":"middle";return a(D,{x:e,y:t+10,textAnchor:c,fill:y.keys,style:r,fontSize:12,children:o})};function X({axisProps:e,interval:t}){const{tickSize:s,tickMargin:r,tickLine:n,stroke:o,strokeWidth:c,style:d}=e;return a(O,{type:"category",dataKey:"minute",tick:a(ve,{}),axisLine:!1,interval:t-1,tickSize:s,tickMargin:r,tickLine:n,stroke:o,strokeWidth:c,style:d,allowDuplicatedCategory:!1})}const be=e=>e.slice(-2),Y=e=>{console.log("Reference area props object: "),console.log(e);const t=new Array(Math.ceil(e.data.length/e.interval)).fill("");return t.map((s,r)=>{const n=r*e.interval,c=Number.parseInt(be(e.data[n].date))%2==0?0:.1,d=e.data[n].minute,u=r===t.length-1?e.data[e.data.length-1]:e.data[n+e.interval].minute;return a(ne,{x1:d,x2:u,y1:e.min,y2:e.max,fill:r%2!=0?`rgba(0, 0, 0, ${.05+c})`:`rgba(0, 0, 0, ${0})`},r)})},z=({style:e})=>a(re,{isAnimationActive:!1,itemStyle:e,labelStyle:e,content:a(Ne,{})});function Ne({label:e,payload:t,active:s}){if(s&&t&&t.length){const r=B(e);return i("div",{className:"custom-tooltip",children:[a("div",{className:"custom-tooltip__label",children:r}),i("div",{className:"custom-tooltip__content",children:["Price: "," ",a("span",{children:+t[0].payload.average.toFixed(2)})]})]})}return null}const ke=({data:e})=>{const t=new Set(e.map(r=>r.date)),s=Math.floor(e.length/[...t].length);return[...t].map((r,n)=>a(L,{x:e[n*s].minute,stroke:y.daySeparator},r))},_e=({axisProps:e,data:t,interval:s,min:r,max:n,daySize:o})=>{const c=a(E,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,strokeWidth:2}),d=a(F,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return a(A,{height:"100%",width:o*5,children:i(w,{isAnimationActive:!1,data:t,margin:{right:0,bottom:10},children:[Y({data:t,interval:s,min:r,max:n}),d,c,X({axisProps:e,interval:s}),P({axisProps:e,min:r,max:n,hide:!0}),R({data:t,daySize:o,style:e.style,isHidden:!1}),z({style:e.style}),ke({data:t})]})})},$e=e=>{const t=e.indexOf(" ");return e.slice(t+1)},Ae=({axisProps:e,previousDayData:t,currentDayData:s,interval:r,min:n,max:o,daySize:c})=>{const d=t.map(f=>N(S({},f),{minute:$e(f.minute)})),u=a(E,{isAnimationActive:!1,dataKey:"average",name:"Average",dot:!1,stroke:y.accentPrimary,data:s,strokeWidth:2}),h=a(E,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,data:d,strokeWidth:2,hide:!0}),m=a(F,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return a(A,{height:"100%",width:c,children:i(w,{data:s,margin:{right:0,bottom:10},padding:{left:10},children:[Y({data:d,interval:r,min:n,max:o}),m,h,u,X({axisProps:e,interval:r}),P({axisProps:e,min:n,max:o,hide:!0}),R({data:s,daySize:c,style:e.style}),a(L,{y:t[t.length-1].average,strokeDasharray:"8 5",strokeWidth:1,stroke:y.accentPrimary}),a(L,{x:"09:30",strokeWidth:2,stroke:y.daySeparator}),z({style:e.style})]})})},M={tickSize:12,tickMargin:10,tickLine:{stroke:y.coreSecondary3},stroke:y.coreSecondary3,strokeWidth:.5,style:{fontFamily:"Roboto",userSelect:"none",fill:y.keys}},we=()=>{const[e,t]=l.exports.useState(!0),[s,r,n]=pe(),[o,c]=ge(),[d,u,h]=Se(),m=3,f=1200,$=Math.min(c.min,n.min),v=Math.max(c.max,n.max);return l.exports.useEffect(()=>{if(h(d.current.scrollWidth),!e&&o.length){const p=[...s];console.log("Temp before change"),console.log(p),p[s.length-1]=N(S({},p[s.length-1]),{average:o[0].average}),console.log("Temp after change"),console.log(p),r(p)}},[e]),l.exports.useEffect(()=>{o&&s&&s.length?t(!1):t(!0)},[o,s]),a("div",{className:"chart__container",ref:d,onMouseDown:u,children:a("div",{className:"chart__inner",children:(()=>{const p=[];if(!s&&!o)return"LOADING";if(s)if(s.length)p.push(a(me,{data:s||o,interval:m,min:$,max:v,axisProps:M},0)),p.push(a(_e,{daySize:f,axisProps:M,data:s,interval:m,min:$,max:v},1)),o&&o.length&&p.push(a(Ae,{daySize:f,axisProps:M,previousDayData:Le(s),currentDayData:o,interval:m,min:$,max:v},2));else return"NO HISTORIC DATA";return s&&o&&!s.length&&!o.length?"NO DATA":p})()})})},Le=e=>{console.log(e);try{const t=e[e.length-1].date;return e.filter(s=>s.date===t).slice(0,-1)}catch(t){console.error("Error filtering previous day in chart from prices array: "+t),console.error("Prices array: "),console.error(e)}};const Ee="https://sandbox.iexapis.com/stable/",Re="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",Pe=async e=>{try{const t=await fetch(`${Ee}/stock/${e}/news/last/3?${Re}`);return await x(t)}catch(t){return console.error(t),[]}},k=(e,t)=>{const s=Math.floor(e/t),r=e%t;return[s,r]},_={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2628e6,year:3154e7},Me=e=>{let t="Error";const s=Date.now()-e,[r,n]=k(s,_.year);r>0&&(t="Over a year");const[o,c]=k(n,_.month);o>0&&(o===1?t="1 month":t=`${o} months`);const[d,u]=k(c,_.day);d>0&&(d===1?t="1 day":t=`${d} days`);const[h,m]=k(u,_.hour);h>0&&(h===1?t="1 hour":t=`${h} hours`);const[f,$]=k(m,_.minute);f>0&&(f===1?t="1 minute":t=`${f} minutes`);const[v,I]=k($,_.second);return v>0&&(v===1?t="1 second":t=`${v} seconds`),I>0?"Now":t+" ago"};function Ie(){const[e,t]=l.exports.useState(null),{symbol:s}=g();l.exports.useEffect(()=>{Pe(s).then(n=>{t(n)})},[s]);const r=[Date.now()-1e5,Date.now()-36e5*2,Date.now()-864e5];return e?i("div",{className:"newsfeed__background",children:[a("h2",{className:"latest-news-text",children:"Latest News"}),e.length?e.map((n,o)=>a(Te,{link:n.url,content:n.headline,timeSincePublication:r[o],source:n.source},n.headline)):"ERROR LOADING NEWS"]}):null}function Te({link:e,content:t,timeSincePublication:s,source:r}){const n=Me(s);return i("div",{className:"article",children:[a("a",{href:e,children:a("h3",{className:"article__content",children:t})}),a("p",{className:"article__time-source",children:`${n} - ${r}`})]})}const Ce="https://sandbox.iexapis.com/stable",Q=async e=>{const t=`${Ce}/stock/${e}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const s=await fetch(t);return await x(s)}catch(s){return console.error("Error retrieving company summary: "+s),"No summary available."}};const Oe=()=>{const[e,t]=l.exports.useState({}),[s,r]=l.exports.useState("Loading..."),{symbol:n}=g();return l.exports.useEffect(()=>{Q(n).then(o=>{if(typeof o=="string")r(o);else{const c=o.description.substring(0,500);t(N(S({},o),{description:c}))}})},[n]),Object.keys(e).length===0?s:i("div",{className:"company__summary",children:[a("h2",{children:"Company Summary"}),a("div",{className:"company__name",children:`${e.companyName} (${e.symbol})`}),a("div",{className:"company__website",children:e.website}),a("div",{className:"company__description",children:e.description})]})};async function De(e){return Promise.resolve(["QCOM","MSI","ERIC","AMZN","GOOGL","MSFT","DELL"])}const Fe=()=>{const[e,t]=l.exports.useState(),{symbol:s,setSymbol:r}=g();return l.exports.useEffect(()=>{De().then(n=>{t(n)})},[s]),i("div",{className:"top_peers",children:[a("h2",{children:"Top Peers"}),a("div",{className:"peers__buttons",children:e==null?void 0:e.map(n=>a("button",{className:"peer",onClick:()=>r(n),children:n},n))})]})};const Ue="https://sandbox.iexapis.com/stable",He="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",qe=async e=>{try{const t=await fetch(`${Ue}/stock/${e}/quote?${He}`);return await x(t)}catch(t){throw console.error("Error retrieving latest price: "+t),Error()}},Ke=e=>{const[t,s]=l.exports.useState(),r=`https://sandbox-sse.iexapis.com/stable/stocksUS?symbols=${e}&token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return l.exports.useEffect(()=>{const n=new EventSource(r);return n.onopen=()=>{console.log("SSE connection established")},n.onmessage=o=>{JSON.parse(o.data).length!==0?s(JSON.parse(o.data)):console.log("Just got an empty message")},n.onerror=async o=>{console.log(o),n.close();try{const c=await qe(e);s([c])}catch(c){console.error(c),s([])}},()=>n.close()},[r,e]),t};var Ge="./assets/redarrow.13e4b84f.svg",Ve="./assets/normal.957bc0c0.svg";const We=({searchFocused:e})=>{const{symbol:t}=g(),s=Ke(t);return(()=>s?s.length?i("div",{className:`price__display ${e?"price__display--hidden":null}`,children:[a("span",{className:"price",children:`$${s==null?void 0:s[0].latestPrice.toFixed(2)}`}),a("img",{className:"arrow",src:(s==null?void 0:s[0].change)>0?Ve:Ge,alt:"down arrow"}),a("span",{className:(s==null?void 0:s[0].change)>0?"change positive":"change negative",children:`${s==null?void 0:s[0].change} | ${s==null?void 0:s[0].changePercent.toFixed(2)}%`})]}):"ERROR LOADING LIVE PRICE":"LOADING")()},Be=({suggestions:e})=>{const{setSymbol:t}=g();return a("div",{className:"suggestions",children:i("ul",{className:"suggestions__list",children:[a("div",{className:"suggestions__title",children:"Stock"}),e==null?void 0:e.map((s,r)=>i("li",{className:"suggestions__stock",onClick:()=>t(s.symbol),children:[s.symbol," - ",s.name]},r))]})})},Xe="https://sandbox.iexapis.com/stable/",Ye=async e=>{const t=`${Xe}search/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const s=await fetch(t);return await x(s)}catch(s){console.log(s)}},ze=e=>{const[t,s]=l.exports.useState();return l.exports.useEffect(()=>(e&&Ye(e).then(r=>{s(r.slice(0,-2))}),()=>s(null)),[e]),t!=null?t:null},Qe=({focused:e,onFocus:t,onBlur:s})=>{const[r,n]=l.exports.useState(""),o=ze(r),{symbol:c}=g(),d=({target:u})=>{n(u.value)};return l.exports.useEffect(()=>{Q(c).then(u=>{n(`${u.symbol} - ${u.companyName}`)})},[c]),i("div",{className:"searchbar",children:[a("div",{className:"field",children:a("input",{type:"text",id:"search",value:r,placeholder:"Enter a stock, symbol or currency",onChange:d,onFocus:t,onBlur:s})}),e?a(Be,{suggestions:o}):null]})},je=({focused:e,setFocused:t})=>i("div",{className:e?"stock__header":"stock__header grayborder",children:[a(Qe,{focused:e,onFocus:()=>t(!0)}),a(We,{searchFocused:e})]});var Je="./assets/ra-logo.70145db3.svg";function Ze(){const[e,t]=l.exports.useState(0),{symbol:s}=g(),[r,n]=l.exports.useState(!1);return l.exports.useEffect(()=>{e<6&&setTimeout(()=>{t(o=>o+1)},[200])},[e]),l.exports.useEffect(()=>{t(0)},[s]),i("div",{className:"App",children:[a("div",{className:"logo-section",onClick:()=>n(!1),children:a("img",{src:Je,height:120,className:"logo",alt:"Reactive Analystics Logo"})}),i("div",{className:"main-section",children:[e>0?a(je,{focused:r,setFocused:n}):null,e>1?a(we,{}):null,e>2?a(ue,{}):null]}),i("div",{className:"news-summary-section",children:[e>3?a(Ie,{}):null,e>4?a(Oe,{}):null,e>5?a(Fe,{}):null]})]})}oe.render(a(ae.StrictMode,{children:a(de,{children:a(Ze,{})})}),document.getElementById("root"));
