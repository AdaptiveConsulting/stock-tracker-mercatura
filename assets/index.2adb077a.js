var X=Object.defineProperty,W=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t)=>{for(var s in t||(t={}))G.call(t,s)&&C(e,s,t[s]);if(P)for(var s of P(t))z.call(t,s)&&C(e,s,t[s]);return e},S=(e,t)=>W(e,Y(t));import{j as i,a as r,r as d,F as J,X as E,T as I,R as b,L as _,Y as Q,b as Z,c as ee,d as $,e as A,C as R,f as te,g as se}from"./vendor.f0c33521.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};ne();const x=e=>"$"+e,T=e=>{const t=e.toString();if(t.length<=3)return t;const s=["","K","M","B","T"],n=Math.floor(e.toString().length/3),o=Math.floor(e.toString().length%3)===0?n-1:n,a=Math.floor(e)/Math.pow(1e3,o),c=e.toString().length%3==0?n-1:n;return a.toFixed(2)+s[c]};const re=({stats:{open:e,high:t,low:s,previousClose:n,week52High:o,week52Low:a,marketCap:c,peRatio:l,dividendYield:u,incomeNetPerWabsoSplitAdjusted:m,volume:f,avgTotalVolume:h}})=>i("div",{className:"stats",children:[r("h2",{className:"stats__title",children:"Key Statistics"}),i("div",{className:"stats-container",children:[i("ul",{className:"stats__list",children:[i("li",{children:["Open ",r("span",{children:e?x(e):"-"})]}),i("li",{children:["High ",r("span",{children:t?x(t):"-"})]}),i("li",{children:["Low ",r("span",{children:s?x(s):"-"})]}),i("li",{children:["Previous Close ",r("span",{children:x(n)})]})]}),i("ul",{className:"stats__list middle-section",children:[i("li",{children:["Day Range"," ",r("span",{children:t?x(`${t} - ${s}`):"-"})]}),i("li",{children:["52 Week Range"," ",r("span",{children:x(`${o} - ${a}`)})]}),i("li",{children:["Market Cap ",r("span",{children:T(c)})]}),i("li",{children:["P/E Ratio ",r("span",{children:l})]})]}),i("ul",{className:"stats__list",children:[i("li",{children:["Dividend Yield ",r("span",{children:(u==null?void 0:u.toFixed(2))+"%"})]}),i("li",{children:["Earnings Per Share"," ",r("span",{children:x(m==null?void 0:m.toFixed(2))})]}),i("li",{children:["Volume ",r("span",{children:f!=null?f:"-"})]}),i("li",{children:["Total Avg. Volume ",r("span",{children:T(h)})]})]})]})]}),F="https://sandbox.iexapis.com/stable/";async function oe(e){const t=`${F}stock/${e}/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,s=`${F}time-series/FUNDAMENTAL_VALUATIONS/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const n=await fetch(t),o=await fetch(s),a=await n.json(),c=await o.json();return g(g({},a),c[0])}catch(n){console.log("Error: ",n)}}const O=d.exports.createContext("AAPL"),p=()=>d.exports.useContext(O),ae=({children:e})=>{const[t,s]=d.exports.useState("AAPL");return r(O.Provider,{value:{symbol:t,setSymbol:s},children:e})},ce=()=>{const[e,t]=d.exports.useState({}),{symbol:s}=p();return d.exports.useEffect(()=>{oe(s).then(n=>t(n)).catch(n=>console.error(n))},[s]),r(J,{children:Object.keys(e).length===0?"Loading...":r(re,{stats:e})})},y={accentPrimary:"#aaabd1",accentBeAware2:"#ffc57f",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",daySeparator:"#7fb3ff",keys:"#7f7f7f"},ie=({x:e,dx:t,y:s,dy:n,style:o,payload:a})=>r(I,{x:e+t,y:s+n,fontSize:16,style:o,children:a.value}),M=({data:e,daySize:t,style:s,isHidden:n})=>{const o=new Set(e.map(c=>c.date)),a=Math.floor(e.length/[...o].length);return r(E,{xAxisId:"top",type:"category",dataKey:"date",tick:r(ie,{}),stroke:y.daySeparator,tickLine:!n,interval:a-1,allowDuplicatedCategory:!0,orientation:"top",style:s,axisLine:!1,dx:t/2-70,dy:-10,margin:{bottom:50}})},le=({data:e,axisProps:t,min:s,max:n})=>r("div",{className:"static-y-axis",children:r(b,{height:"100%",width:61,children:i(_,{data:e,margin:{bottom:40},children:[L({axisProps:t,min:s,max:n}),M({data:e,style:t.style,isHidden:!0})]})})});function L({axisProps:e,min:t,max:s,hide:n}){const{tickSize:o,tickMargin:a,tickLine:c,stroke:l,strokeWidth:u,style:m}=e;return r(Q,{type:"number",dataKey:"average",domain:[t,s],tickSize:o,tickCount:5,tickMargin:a,tickLine:c,stroke:l,strokeWidth:u,style:m,hide:n})}const D="https://sandbox.iexapis.com/stable/",U="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",de=async e=>(await fetch(`${D}/stock/${e}/intraday-prices?${U}&chartInterval=10`)).json(),ue=async e=>(await fetch(`${D}/stock/${e}/chart/5dm?${U}`)).json(),K=e=>e.filter(t=>t.average!==null),me=()=>{const[e,t]=d.exports.useState(null),[s,n]=d.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:o}=p();return d.exports.useEffect(()=>{ue(o).then(a=>{const c=K(a),l=c.map(h=>h.average),u=Math.floor(Math.min(...l)),m=Math.floor(Math.max(...l)+1);n({min:u,max:m}),c.push(S(g({},c[c.length-1]),{minute:"16:00"}));const f=c.map((h,k)=>S(g({},h),{minute:k.toString()+" "+h.minute}));t(f)}).catch(a=>console.error("Error retrieving historical prices: "+a))},[o]),[e,s]},he=()=>{const[e,t]=d.exports.useState(null),[s,n]=d.exports.useState({min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),{symbol:o}=p();return d.exports.useEffect(()=>{de(o).then(a=>{const c=K(a),l=c.map(f=>f.average),u=Math.floor(Math.min(...l)),m=Math.floor(Math.max(...l)+1);n({min:u,max:m}),t(c)}).catch(a=>console.error("Error retrieving intraday prices: "+a))},[o]),[e,s]},fe=()=>{const e=d.exports.useRef(null);let t={left:0,x:0};const s=a=>{t={left:e.current.scrollLeft,x:a.clientX},document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)},n=a=>{const c=a.clientX-t.x;e.current.scrollLeft=t.left-c},o=a=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)};return[e,s]},H=e=>{const t=ye(e);if(typeof t!="string"||!t.match(/(\d?\d:\d\d){1}/))throw new Error("cleanTimeString must be a string in the format m:hh or mm:hh");{const s=Number.parseInt(t.slice(0,-2));if(s===12)return t+" PM";const n=s>12?"PM":"AM",o=t.slice(-2);return`${s%12}:${o} ${n}`}},ye=e=>{if(typeof e=="string"){const t=e.indexOf(" ");return e.slice(t+1)}return e},pe=({x:e,y:t,payload:s,style:n,index:o})=>{let a=H(s.value);a==="4:00 PM"&&(a="");let c=a==="9:30 AM"?"start":"middle";return r(I,{x:e,y:t+10,textAnchor:c,fill:y.keys,style:n,fontSize:12,children:a})};function j({axisProps:e,interval:t}){const{tickSize:s,tickMargin:n,tickLine:o,stroke:a,strokeWidth:c,style:l}=e;return r(E,{type:"category",dataKey:"minute",tick:r(pe,{}),axisLine:!1,interval:t-1,tickSize:s,tickMargin:n,tickLine:o,stroke:a,strokeWidth:c,style:l,allowDuplicatedCategory:!1})}const ge=e=>e.slice(-2),q=e=>{const t=new Array(Math.ceil(e.data.length/e.interval)).fill("");return t.map((s,n)=>{const o=n*e.interval,c=Number.parseInt(ge(e.data[o].date))%2==0?0:.1,l=e.data[o].minute,u=n===t.length-1?e.data[e.data.length-1]:e.data[o+e.interval].minute;return r(Z,{x1:l,x2:u,y1:e.min,y2:e.max,fill:n%2!=0?`rgba(0, 0, 0, ${.05+c})`:`rgba(0, 0, 0, ${0})`},n)})},B=({style:e})=>r(ee,{isAnimationActive:!1,itemStyle:e,labelStyle:e,content:r(xe,{})});function xe({label:e,payload:t,active:s}){if(s&&t&&t.length){const n=H(e);return i("div",{className:"custom-tooltip",children:[r("div",{className:"custom-tooltip__label",children:n}),i("div",{className:"custom-tooltip__content",children:["Price: "," ",r("span",{children:+t[0].payload.average.toFixed(2)})]})]})}return null}const ve=({data:e})=>{const t=new Set(e.map(n=>n.date)),s=Math.floor(e.length/[...t].length);return[...t].map((n,o)=>r($,{x:e[o*s].minute,stroke:y.daySeparator},n))},Se=({axisProps:e,data:t,interval:s,min:n,max:o,daySize:a})=>{const c=r(A,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,strokeWidth:2}),l=r(R,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return r(b,{height:"100%",width:a*5,children:i(_,{isAnimationActive:!1,data:t,margin:{right:0,bottom:10},children:[q({data:t,interval:s,min:n,max:o}),l,c,j({axisProps:e,interval:s}),L({axisProps:e,min:n,max:o,hide:!0}),M({data:t,daySize:a,style:e.style,isHidden:!1}),B({style:e.style}),ve({data:t})]})})},ke=e=>{const t=e.indexOf(" ");return e.slice(t+1)},Ne=({axisProps:e,previousDayData:t,currentDayData:s,interval:n,min:o,max:a,daySize:c})=>{const l=t.map(h=>S(g({},h),{minute:ke(h.minute)})),u=r(A,{isAnimationActive:!1,dataKey:"average",name:"Average",dot:!1,stroke:y.accentPrimary,data:s,strokeWidth:2}),m=r(A,{isAnimationActive:!1,type:"linear",dataKey:"average",dot:!1,stroke:y.accentPrimary,data:l,strokeWidth:2,hide:!0}),f=r(R,{stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:1});return r(b,{height:"100%",width:c,children:i(_,{data:s,margin:{right:0,bottom:10},padding:{left:10},children:[q({data:l,interval:n,min:o,max:a}),f,m,u,j({axisProps:e,interval:n}),L({axisProps:e,min:o,max:a,hide:!0}),M({data:s,daySize:c,style:e.style}),r($,{y:t[t.length-1].average,strokeDasharray:"8 5",strokeWidth:1,stroke:y.accentPrimary}),r($,{x:"09:30",strokeWidth:2,stroke:y.daySeparator}),B({style:e.style})]})})},w={tickSize:12,tickMargin:10,tickLine:{stroke:y.coreSecondary3},stroke:y.coreSecondary3,strokeWidth:.5,style:{fontFamily:"Roboto",userSelect:"none",fill:y.keys}},be=()=>{const[e,t]=me(),[s,n]=he(),[o,a]=fe(),c=3,l=1200,u=Math.min(n.min,t.min),m=Math.max(n.max,t.max);let f=!1,h=[];return s&&e&&(h=_e(e),f=s[0].date!==h[0].date),r("div",{className:"chart__container",ref:o,onMouseDown:a,children:i("div",{className:"chart__inner",children:[e||f?r(le,{data:e,interval:c,min:u,max:m,axisProps:w}):null,e?r(Se,{daySize:l,axisProps:w,data:e,interval:c,min:u,max:m}):null,f?r(Ne,{daySize:l,axisProps:w,previousDayData:h,currentDayData:s,interval:c,min:u,max:m}):null]})})},_e=e=>{const t=e[e.length-1].date;return e.filter(s=>s.date===t)};const $e="https://sandbox.iexapis.com/stable/",Ae="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",Me=async e=>{try{return(await fetch(`${$e}/stock/${e}/news/last/3?${Ae}`)).json()}catch(t){console.error(t)}},v=(e,t)=>{const s=Math.floor(e/t),n=e%t;return[s,n]},Le=e=>{let t="Error";const s=Date.now()-e,[n,o]=v(s,3154e7);n>0&&(t="Over a year");const[a,c]=v(o,2628e6);a>0&&(a===1?t="1 month":t=`${a} months`);const[l,u]=v(c,864e5);l>0&&(l===1?t="1 day":t=`${l} days`);const[m,f]=v(u,36e5);m>0&&(m===1?t="1 hour":t=`${m} hours`);const[h,k]=v(f,6e4);h>0&&(h===1?t="1 minute":t=`${h} minutes`);const[N,V]=v(k,1e3);return N>0&&(N===1?t="1 second":t=`${N} seconds`),V>0?"Now":t+" ago"};function we(){const[e,t]=d.exports.useState(null),{symbol:s}=p();return d.exports.useEffect(()=>{Me(s).then(n=>{t(n)})},[s]),e?i("div",{className:"newsfeed__background",children:[r("h2",{className:"latest-news-text",children:"Latest News"}),e.map(n=>r(Pe,{link:n.url,content:n.headline,timeSincePublication:n.datetime,source:n.source},n.headline))]}):null}function Pe({link:e,content:t,timeSincePublication:s,source:n}){const o=Le(s);return i("div",{className:"article",children:[r("a",{href:e,children:r("h3",{className:"article__content",children:t})}),r("p",{className:"article__time-source",children:`${o} - ${n}`})]})}const Ce="https://sandbox.iexapis.com/stable",Ee=async e=>{const t=`${Ce}/stock/${e}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return(await fetch(t)).json()};const Ie=()=>{const[e,t]=d.exports.useState({}),{symbol:s}=p();return d.exports.useEffect(()=>{Ee(s).then(n=>{const o=n.description.substring(0,500);t(S(g({},n),{description:o}))})},[s]),Object.keys(e).length===0?"Loading...":i("div",{className:"company__summary",children:[r("h2",{children:"Company Summary"}),r("div",{className:"company__name",children:`${e.companyName} (${e.symbol})`}),r("div",{className:"company__website",children:e.website}),r("div",{className:"company__description",children:e.description})]})};async function Re(e){return Promise.resolve(["QCOM","MSI","ERIC","AMAZN","GOOGL","MSFT","DELL"])}const Te=()=>{const[e,t]=d.exports.useState(),{symbol:s,setSymbol:n}=p();return d.exports.useEffect(()=>{Re().then(o=>{t(o)})},[s]),i("div",{className:"top_peers",children:[r("h2",{children:"Top Peers"}),r("div",{className:"peers__buttons",children:e==null?void 0:e.map(o=>r("button",{className:"peer",onClick:()=>n(o),children:o},o))})]})};const Fe=e=>{const[t,s]=d.exports.useState(),n=`https://sandbox-sse.iexapis.com/stable/stocksUS?symbols=${e}&token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return d.exports.useEffect(()=>{const o=new EventSource(n);return o.onmessage=a=>{JSON.parse(a.data).length!==0?s(JSON.parse(a.data)):console.log("Just got an empty message")},o.onerror=a=>{console.log(a),o.close()},()=>o.close()},[n]),t};var Oe="./assets/redarrow.13e4b84f.svg",De="./assets/normal.957bc0c0.svg";const Ue=()=>{const{symbol:e}=p(),t=Fe(e);return t?i("div",{className:"price__display",children:[r("span",{className:"price",children:`$${t==null?void 0:t[0].latestPrice.toFixed(2)}`}),r("img",{className:"arrow",src:(t==null?void 0:t[0].change)>0?De:Oe,alt:"down arrow"}),r("span",{className:(t==null?void 0:t[0].change)>0?"change positive":"change negative",children:`${t==null?void 0:t[0].change} | ${t==null?void 0:t[0].changePercent.toFixed(2)}%`})]}):null},Ke=({suggestions:e})=>{const{setSymbol:t}=p();return r("div",{className:"suggestions",children:i("ul",{className:"suggestions__list",children:[r("div",{className:"suggestions__title",children:"Stock"}),e==null?void 0:e.map((s,n)=>i("li",{className:"suggestions__stock",onClick:()=>t(s.symbol),children:[s.symbol," - ",s.name]},n))]})})},He="https://sandbox.iexapis.com/stable/",je=async e=>{const t=`${He}search/${e}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{return(await fetch(t)).json()}catch(s){console.log(s)}},qe=e=>{const[t,s]=d.exports.useState();return d.exports.useEffect(()=>(e&&je(e).then(n=>{s(n.slice(0,-2))}),()=>s(null)),[e]),t!=null?t:null},Be=({onFocus:e,onBlur:t})=>{const[s,n]=d.exports.useState(""),o=qe(s);return i("div",{className:"searchbar",children:[r("div",{className:"field",children:r("input",{type:"text",id:"search",value:s,placeholder:"Enter a stock, symbol or currency",onChange:({target:c})=>{n(c.value)},onFocus:e,onBlur:t})}),s?r(Ke,{suggestions:o}):null]})},Ve=()=>{const[e,t]=d.exports.useState(!1);return i("div",{className:e?"stock__header":"stock__header grayborder",children:[r(Be,{onFocus:()=>t(!0),onBlur:()=>t(!1)}),e?null:r(Ue,{})]})};var Xe="./assets/ra-logo.caf30fde.svg";function We(){const[e,t]=d.exports.useState(0);return d.exports.useEffect(()=>{e<6&&setTimeout(()=>{t(s=>s+1)},[200])},[e]),i("div",{className:"App",children:[r("div",{className:"logo-section",children:r("img",{src:Xe,height:120,className:"logo",alt:"Reactive Analystics Logo"})}),i(ae,{children:[i("div",{className:"main-section",children:[e>0?r(Ve,{}):null,e>1?r(be,{}):null,e>2?r(ce,{}):null]}),i("div",{className:"news-summary-section",children:[e>3?r(we,{}):null,e>4?r(Ie,{}):null,e>5?r(Te,{}):null]})]})]})}te.render(r(se.StrictMode,{children:r(We,{})}),document.getElementById("root"));
