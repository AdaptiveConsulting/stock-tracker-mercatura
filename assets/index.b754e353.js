var T=Object.defineProperty,O=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var _=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,N=(t,e)=>{for(var s in e||(e={}))I.call(e,s)&&_(t,s,e[s]);if(v)for(var s of v(e))U.call(e,s)&&_(t,s,e[s]);return t},w=(t,e)=>O(t,F(e));import{j as a,a as n,r as l,F as D,R as q,b as K,L as j,c as B,C as G,X as H,Y as J,T as A,d as Q,e as V}from"./vendor.ae85c455.js";const X=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}};X();const p=t=>"$"+t,L=t=>{const e=t.toString();if(e.length<=3)return e;const s=["","K","M","B","T"],r=Math.floor(t.toString().length/3),o=Math.floor(t.toString().length%3)===0?r-1:r,c=Math.floor(t)/Math.pow(1e3,o),i=t.toString().length%3==0?r-1:r;return c.toFixed(2)+s[i]};const z=({stats:{open:t,high:e,low:s,previousClose:r,week52High:o,week52Low:c,marketCap:i,peRatio:d,dividendYield:h,incomeNetPerWabsoSplitAdjusted:f,volume:u,avgTotalVolume:S}})=>a("div",{className:"stats",children:[n("h2",{className:"stats__title",children:"Key Statistics"}),a("div",{className:"stats-container",children:[a("ul",{className:"stats__list",children:[a("li",{children:["Open ",n("span",{children:t?p(t):"-"})]}),a("li",{children:["High ",n("span",{children:e?p(e):"-"})]}),a("li",{children:["Low ",n("span",{children:s?p(s):"-"})]}),a("li",{children:["Previous Close ",n("span",{children:p(r)})]})]}),a("ul",{className:"stats__list middle-section",children:[a("li",{children:["Day Range"," ",n("span",{children:e?p(`${e} - ${s}`):"-"})]}),a("li",{children:["52 Week Range"," ",n("span",{children:p(`${o} - ${c}`)})]}),a("li",{children:["Market Cap ",n("span",{children:L(i)})]}),a("li",{children:["P/E Ratio ",n("span",{children:d})]})]}),a("ul",{className:"stats__list",children:[a("li",{children:["Dividend Yield ",n("span",{children:(h==null?void 0:h.toFixed(2))+"%"})]}),a("li",{children:["Earnings Per Share"," ",n("span",{children:p(f==null?void 0:f.toFixed(2))})]}),a("li",{children:["Volume ",n("span",{children:u!=null?u:"-"})]}),a("li",{children:["Total Avg. Volume ",n("span",{children:L(S)})]})]})]})]}),P="https://sandbox.iexapis.com/stable/";async function W(t){const e=`${P}stock/${t}/quote?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`,s=`${P}time-series/FUNDAMENTAL_VALUATIONS/${t}?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;try{const r=await fetch(e),o=await fetch(s),c=await r.json(),i=await o.json();return N(N({},c),i[0])}catch(r){console.log("Error: ",r)}}const M=l.exports.createContext("AAPL"),x=()=>l.exports.useContext(M),Y=({children:t})=>{const[e,s]=l.exports.useState("AAPL");return n(M.Provider,{value:{symbol:e,setSymbol:s},children:t})},Z=()=>{const[t,e]=l.exports.useState({}),{symbol:s}=x();return l.exports.useEffect(()=>{W(s).then(r=>e(r)).catch(r=>console.error(r))},[s]),n(D,{children:Object.keys(t).length===0?"Loading...":n(z,{stats:t})})},ee="https://sandbox.iexapis.com/stable/",te="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",se=async t=>(await fetch(`${ee}/stock/${t}/intraday-prices?${te}&chartInterval=10`)).json(),ne=t=>{if(typeof t!="string"||!t.match(/(\d?\d:\d\d){1}/))throw new Error("timeString must be a string in the format m:hh or mm:hh");{const e=Number.parseInt(t.slice(0,-2));if(e===12)return t+" PM";const s=e>12?"PM":"AM",r=t.slice(-2);return`${e%12}:${r} ${s}`}};const m={accentPrimary:"#aaabd1",coreSecondary2:"#f1f2f2",coreSecondary3:"#eaebeb",keys:"#7f7f7f"},re=t=>t.filter(e=>e.average),oe=()=>{const[t,e]=l.exports.useState([]),{symbol:s}=x();return l.exports.useEffect(()=>{se(s).then(r=>{const o=re(r);e(o)}).catch(r=>console.error(r))},[s]),t.length?n("div",{className:"chart-container",children:n(ie,{data:t,interval:4})}):null},ce=({x:t,y:e,payload:s,style:r,min:o})=>{let c="-";return(s.value-o)%2==0&&(c=Number.parseFloat(s.value).toFixed(0)),n(A,{x:t,y:e,fill:m.keys,style:r,textAnchor:"end",verticalAnchor:"middle",children:c})},ae=({x:t,y:e,payload:s,style:r,index:o})=>{const c=ne(s.value);let i=o===0?"start":"middle";return n(A,{x:t,y:e+10,textAnchor:i,fill:m.keys,style:r,children:c})},ie=({data:t,interval:e})=>{const s=n(B,{type:"linear",dataKey:"average",dot:!1,stroke:m.accentPrimary,strokeWidth:2}),r=n(G,{stroke:m.coreSecondary3,vertical:!1,strokeWidth:1}),o={fontFamily:"Roboto"},c=n(H,{type:"category",dataKey:"minute",interval:e-1,axisLine:!1,tickMargin:10,tick:n(ae,{}),tickSize:12,tickLine:{stroke:m.coreSecondary3},stroke:m.coreSecondary3,strokeWidth:.5,style:o}),i=t.map(g=>g.average),d=Math.floor(Math.min(...i)),h=Math.max(...i)+1,f=Math.ceil(h-d);let u=[];for(let g=0;g<f;g+=1)u.push(d+g);const S=n(J,{type:"number",dataKey:"average",stroke:m.coreSecondary3,style:o,ticks:u,tickMargin:10,tick:n(ce,{min:d}),tickSize:12,tickLine:{stroke:m.coreSecondary3},domain:[d,h]}),y=new Array(Math.ceil(t.length/e)).fill(""),C=y.map((g,k)=>{const $=k*e,R=t[$].minute,E=k===y.length-1?t[t.length-1]:t[$+e].minute;return n(q,{x1:R,x2:E,y1:d,y2:h,fill:k%2!=0?m.coreSecondary2:"rgba(0, 0, 0, 0)"},k)});return n(K,{width:"100%",height:"100%",children:a(j,{data:t,children:[C,r,s,c,S]})})};const le="https://sandbox.iexapis.com/stable/",de="token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512",he=async t=>{try{return(await fetch(`${le}/stock/${t}/news/last/3?${de}`)).json()}catch(e){console.error(e)}},b=(t,e)=>{const s=Math.floor(t/e),r=t%e;return[s,r]},ue=t=>{const e=t-Date.now(),[s,r]=b(e,3154e7);if(s>0)return"Over a year";const[o,c]=b(r,2628e6);if(o>0)return o>1?"1 month":`${o} months`;const[i,d]=b(c,864e5);if(i>0)return i>1?"1 day":`${i} days`;const[h,f]=b(d,36e5);if(h>0)return h>1?"1 hour":`${h} hours`;const[u,S]=b(f,6e4);if(u>0)return u>1?"1 minute":`${u} minutes`;const y=S/1e3;return y>0?y>1?"1 second":`${y} seconds`:"Error"};function me(){const[t,e]=l.exports.useState(null),{symbol:s}=x();return l.exports.useEffect(()=>{he(s).then(r=>{e(r)})},[s]),t?a("div",{className:"newsfeed__background",children:[n("h2",{className:"latest-news-text",children:"Latest News"}),t.map(r=>n(fe,{link:r.url,content:r.headline,timeSincePublication:r.datetime,source:r.source},r.headline))]}):null}function fe({link:t,content:e,timeSincePublication:s,source:r}){const o=ue(s);return a("div",{className:"article",children:[n("a",{href:t,children:n("h3",{className:"article__content",children:e})}),n("p",{className:"article__time-source",children:`${o} ago - ${r}`})]})}const pe="https://sandbox.iexapis.com/stable",ye=async t=>{const e=`${pe}/stock/${t}/company?token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return(await fetch(e)).json()};const ge=()=>{const[t,e]=l.exports.useState({}),{symbol:s}=x();return l.exports.useEffect(()=>{ye(s).then(r=>{const o=r.description.substring(0,500);e(w(N({},r),{description:o}))})},[s]),Object.keys(t).length===0?"Loading...":a("div",{className:"company__summary",children:[n("h2",{children:"Company Summary"}),n("div",{className:"company__name",children:`${t.companyName} (${t.symbol})`}),n("div",{className:"company__website",children:t.website}),n("div",{className:"company__description",children:t.description})]})};async function xe(t){return Promise.resolve(["QCOM","MSI","ERIC","AMAZN","GOOGL","MSFT","DELL"])}const Se=()=>{const[t,e]=l.exports.useState(),{symbol:s,setSymbol:r}=x();return l.exports.useEffect(()=>{xe().then(o=>{e(o)})},[s]),a("div",{className:"top_peers",children:[n("h2",{children:"Top Peers"}),n("div",{className:"peers__buttons",children:t==null?void 0:t.map(o=>n("button",{className:"peer",onClick:()=>r(o),children:o},o))})]})},be=t=>{const[e,s]=l.exports.useState(),r=`https://sandbox-sse.iexapis.com/stable/stocksUS?symbols=${t}&token=Tpk_b2d8e00d9a3542d68e4a8767edb9f512`;return l.exports.useEffect(()=>{const o=new EventSource(r);return o.onmessage=c=>{JSON.parse(c.data).length!==0?s(JSON.parse(c.data)):console.log("Just got an empty message")},o.onerror=c=>{console.log(c),o.close()},()=>o.close()},[r]),e};var ke="./assets/redarrow.13e4b84f.svg",Ne="./assets/normal.957bc0c0.svg";const $e=()=>{const{symbol:t}=x(),e=be(t);return a("div",{className:"price__display",children:[n("span",{className:"price",children:`$${e==null?void 0:e[0].latestPrice.toFixed(2)}`}),n("img",{className:"arrow",src:(e==null?void 0:e[0].change)>0?Ne:ke,alt:"down arrow"}),n("span",{className:(e==null?void 0:e[0].change)>0?"change positive":"change negative",children:`${e==null?void 0:e[0].change} | ${e==null?void 0:e[0].changePercent.toFixed(2)}%`})]})};function ve(){return a("div",{className:"App",children:[n("div",{className:"logo-section"}),a(Y,{children:[a("div",{className:"main-section",children:[n($e,{}),n(oe,{}),n(Z,{})]}),a("div",{className:"news-summary-section",children:[n(me,{}),n(ge,{}),n(Se,{})]})]})]})}Q.render(n(V.StrictMode,{children:n(ve,{})}),document.getElementById("root"));
